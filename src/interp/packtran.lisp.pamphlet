\documentclass{article}
\usepackage{axiom}
\begin{document}
\title{\$SPAD/src/interp packtran.lisp}
\author{The Axiom Team}
\maketitle
\begin{abstract}
\end{abstract}
\eject
\tableofcontents
\eject
<<*>>=
(IN-PACKAGE (QUOTE BOOT))

;--The $useNewParser flag controls which parser will be used in the interpreter
;--If nil then the old parser is used, otherwise Bill Burge's parser is used
;$useNewParser := true

(EVAL-WHEN (EVAL LOAD) (SETQ |$useNewParser| T))

;rePackageTran(sex, package) ==
;  _*PACKAGE_* : fluid := FIND_-PACKAGE STRING package
;  packageTran sex

(DEFUN |rePackageTran| (|sex| |package|)
  (PROG (*PACKAGE*)
    (DECLARE (SPECIAL *PACKAGE*))
    (RETURN
      (PROGN
        (SETQ *PACKAGE* (FIND-PACKAGE (STRING |package|)))
        (|packageTran| |sex|)))))

;packageTran sex ==
;-- destructively translate all the symbols in the given s-expression to the 
;-- current package
;  SYMBOLP sex =>
;    EQ(_*PACKAGE_*, SYMBOL_-PACKAGE sex) => sex
;    INTERN STRING sex
;  CONSP sex =>
;    RPLACA(sex, packageTran CAR sex)
;    RPLACD(sex, packageTran CDR sex)
;    sex
;  sex

(DEFUN |packageTran| (|sex|)
  (PROG ()
    (RETURN
      (COND
        ((SYMBOLP |sex|)
         (COND
           ((EQ *PACKAGE* (SYMBOL-PACKAGE |sex|)) |sex|)
           ('T (INTERN (STRING |sex|)))))
        ((CONSP |sex|)
         (PROGN
           (RPLACA |sex| (|packageTran| (CAR |sex|)))
           (RPLACD |sex| (|packageTran| (CDR |sex|)))
           |sex|))
        ('T |sex|)))))

;zeroOneTran sex ==
;-- destructively translate the symbols |0| and |1| to their 
;-- integer counterparts
;  NSUBST("$EmptyMode", "?", sex)
;  sex

(DEFUN |zeroOneTran| (|sex|)
  (PROG () (RETURN (PROGN (NSUBST '|$EmptyMode| '? |sex|) |sex|))))

@
\eject
\begin{thebibliography}{99}
\bibitem{1} nothing
\end{thebibliography}
\end{document}
