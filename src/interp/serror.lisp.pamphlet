\documentclass{article}
\usepackage{axiom}
\begin{document}
\title{\$SPAD/src/interp serror.lisp}
\author{The Axiom Team}
\maketitle
\begin{abstract}
\end{abstract}
\eject
\tableofcontents
\eject
<<*>>=

(IN-PACKAGE "BOOT")

;--% Functions to handle specific errors (mostly syntax)

;npMissingMate(close,open)==
;   ncSoftError(tokPosn open, 'S2CY0008, [])
;   npMissing close
 
(DEFUN |npMissingMate| (|close| |open|)
  (PROG ()
    (RETURN
      (PROGN
        (|ncSoftError| (|tokPosn| |open|) 'S2CY0008 NIL)
        (|npMissing| |close|)))))

;npMissing s==
;   ncSoftError(tokPosn $stok,'S2CY0007, [PNAME s])
;   THROW("TRAPPOINT","TRAPPED")
 

;pfSourceStok x==
;       if pfLeaf? x
;       then x
;       else if null pfParts x
;            then 'NoToken
;            else pfSourceStok pfFirst x
 
(DEFUN |pfSourceStok| (|x|)
  (PROG ()
    (RETURN
      (COND
        ((|pfLeaf?| |x|) |x|)
        ((NULL (|pfParts| |x|)) '|NoToken|)
        ('T (|pfSourceStok| (|pfFirst| |x|)))))))

;npTrapForm(x)==
;   a:=pfSourceStok x
;   EQ(a,'NoToken)=>
;         syGeneralErrorHere()
;         THROW("TRAPPOINT","TRAPPED")
;   ncSoftError(tokPosn a, 'S2CY0002, [])
;   THROW("TRAPPOINT","TRAPPED")
 
(DEFUN |npTrapForm| (|x|)
  (PROG (|a|)
    (RETURN
      (PROGN
        (SETQ |a| (|pfSourceStok| |x|))
        (COND
          ((EQ |a| '|NoToken|)
           (PROGN (|syGeneralErrorHere|) (THROW 'TRAPPOINT 'TRAPPED)))
          ('T
           (PROGN
             (|ncSoftError| (|tokPosn| |a|) 'S2CY0002 NIL)
             (THROW 'TRAPPOINT 'TRAPPED))))))))

@
\eject
\begin{thebibliography}{99}
\bibitem{1} nothing
\end{thebibliography}
\end{document}
